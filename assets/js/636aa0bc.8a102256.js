"use strict";(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[2778],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var i=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=i.createContext({}),d=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=d(e.components);return i.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=d(n),m=o,u=h["".concat(c,".").concat(m)]||h[m]||p[m]||r;return n?i.createElement(u,a(a({ref:t},l),{},{components:n})):i.createElement(u,a({ref:t},l))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var d=2;d<r;d++)a[d]=n[d];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8885:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var i=n(7462),o=(n(7294),n(3905));const r={sidebar_position:1,sidebar_label:"Cheat Sheet",sidebar_class_name:"sidebar-item-python-cheat-sheet",title:"Cheat Sheet for Python + Momento Vector Index",description:"Everything to get you going with coding using Python and Momento Vector Index"},a="Cheat Sheet for Python with Momento Vector Index",s={unversionedId:"vector-index/develop/sdks/python/cheat-sheet",id:"vector-index/develop/sdks/python/cheat-sheet",title:"Cheat Sheet for Python + Momento Vector Index",description:"Everything to get you going with coding using Python and Momento Vector Index",source:"@site/docs/vector-index/develop/sdks/python/cheat-sheet.md",sourceDirName:"vector-index/develop/sdks/python",slug:"/vector-index/develop/sdks/python/cheat-sheet",permalink:"/vector-index/develop/sdks/python/cheat-sheet",draft:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/vector-index/develop/sdks/python/cheat-sheet.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Cheat Sheet",sidebar_class_name:"sidebar-item-python-cheat-sheet",title:"Cheat Sheet for Python + Momento Vector Index",description:"Everything to get you going with coding using Python and Momento Vector Index"},sidebar:"vectorSidebar",previous:{title:"Python",permalink:"/vector-index/develop/sdks/python/"}},c={},d=[{value:"Import libraries and connect to return a PreviewVectorIndexClient object",id:"import-libraries-and-connect-to-return-a-previewvectorindexclient-object",level:2},{value:"Create a new index in Momento Vector Index",id:"create-a-new-index-in-momento-vector-index",level:2},{value:"Get list of existing indexes in your account",id:"get-list-of-existing-indexes-in-your-account",level:2},{value:"Write an item batch to the index",id:"write-an-item-batch-to-the-index",level:2},{value:"Searching the index",id:"searching-the-index",level:2},{value:"Deleting items from the index",id:"deleting-items-from-the-index",level:2},{value:"Usage notes",id:"usage-notes",level:2}],l={toc:d};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,i.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"cheat-sheet-for-python-with-momento-vector-index"},"Cheat Sheet for Python with Momento Vector Index"),(0,o.kt)("p",null,"If you need to get going quickly with Python and Momento Vector Index, this page contains the basic API calls you'll need."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"An image of a python on a pile of books searching through them like a vector index.",src:n(4348).Z,width:"1000",height:"202"})),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you combine all of the functions on this page into one python file, you'd have a central collection of functions you can import and call from other python code. In addition, if you are using this code in production you might look to replace the print() calls with ones using the logging library (",(0,o.kt)("inlineCode",{parentName:"p"},"import logging"),") in python. ",(0,o.kt)("a",{target:"_blank",href:n(670).Z},"Click here")," to see the class file with all definitions in it.")),(0,o.kt)("h2",{id:"import-libraries-and-connect-to-return-a-previewvectorindexclient-object"},"Import libraries and connect to return a PreviewVectorIndexClient object"),(0,o.kt)("p",null,"This code sets up the class with the necessary imports, the class definition, and the PreviewVectorIndexClient instantiation that each of the other functions will need to call."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from momento import (\n    CredentialProvider,\n    PreviewVectorIndexClient,\n    VectorIndexConfigurations,\n)\n\nfrom momento.requests.vector_index import Item\nfrom momento.responses.vector_index import (\n    AddItemBatch,\n    CreateIndex,\n    DeleteIndex,\n    DeleteItemBatch,\n    ListIndexes,\n    Search,\n)\n\ndef create_vector_index_client():\n  momento_auth_token = CredentialProvider.from_environment_variable('MOMENTO_AUTH_TOKEN')\n  config = {\n    'configuration': VectorIndexConfigurations.Default.latest(),\n    'credential_provider': momento_auth_token,\n  }\n  return PreviewVectorIndexClient(**config)\n")),(0,o.kt)("h2",{id:"create-a-new-index-in-momento-vector-index"},"Create a new index in Momento Vector Index"),(0,o.kt)("p",null,"Use this function to create a new index in your account."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def create_index(client, index_name: str) -> None:\n    print("Creating index with name " + index_name)\n    create_index_response = client.create_index(index_name, num_dimensions=2)\n    if isinstance(create_index_response, CreateIndex.Success):\n        print("Index with name " + index_name + " successfully created!")\n    elif isinstance(create_index_response, CreateIndex.IndexAlreadyExists):\n        print("Index with name " + index_name + " already exists")\n    elif isinstance(create_index_response, CreateIndex.Error):\n        raise(Exception("Error while creating index " + create_index_response.message))\n')),(0,o.kt)("h2",{id:"get-list-of-existing-indexes-in-your-account"},"Get list of existing indexes in your account"),(0,o.kt)("p",null,"In this example, we use the client function above to get a client object and then use it to list all of the indexes for this account."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def list_indexes(client) -> None:\n    print("Listing indexes")\n    list_indexes_response = client.list_indexes()\n    if isinstance(list_indexes_response, ListIndexes.Success):\n        for index in list_indexes_response.index_names:\n            print("Account has an index with name " + index)\n    elif isinstance(list_indexes_response, ListIndexes.Error):\n        print(Exception("Error while listing indexes " + list_indexes_response.message))\n')),(0,o.kt)("h2",{id:"write-an-item-batch-to-the-index"},"Write an item batch to the index"),(0,o.kt)("p",null,"A simple example of doing an ",(0,o.kt)("inlineCode",{parentName:"p"},"add_item_batch")," operation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def add_items(client, index_name: str):\n    items = [\n        Item(id="test_item_1", vector=[1.0, 2.0], metadata={"key1": "value1"}),\n        Item(id="test_item_2", vector=[3.0, 4.0], metadata={"key2": "value2"}),\n        Item(id="test_item_3", vector=[5.0, 6.0], metadata={"key1": "value3", "key3": "value3"}),\n    ]\n    print("Adding items " + str(items))\n    add_response = client.add_item_batch(\n        index_name,\n        items=items,\n    )\n    if isinstance(add_response, AddItemBatch.Success):\n        print("Successfully added items")\n    elif isinstance(add_response, AddItemBatch.Error):\n        raise(Exception("Error while adding items to index " + index_name + " " + add_response.message))\n')),(0,o.kt)("h2",{id:"searching-the-index"},"Searching the index"),(0,o.kt)("p",null,"This is an example of a search operation to get the topK items from the index matching the ",(0,o.kt)("inlineCode",{parentName:"p"},"query_vector"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def search(client, index_name: str):\n    query_vector = [1.0, 2.0]\n    top_k = 2\n    print("Searching index " + index_name + " with query_vector " + str(query_vector) + " and top " + str(top_k) + " elements")\n    search_response = client.search(index_name, query_vector=query_vector, top_k=top_k)\n    if isinstance(search_response, Search.Success):\n        print("Search succeeded with " + str(len(search_response.hits)) + " matches")\n    elif isinstance(search_response, Search.Error):\n        raise(Exception("Error while searching on index " + index_name + " " + search_response.message))\n')),(0,o.kt)("h2",{id:"deleting-items-from-the-index"},"Deleting items from the index"),(0,o.kt)("p",null,"An example of deleting the items from an index using ",(0,o.kt)("inlineCode",{parentName:"p"},"delete_item_batch"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def delete_items(client, index_name: str):\n    item_ids_to_delete = ["test_item_1", "test_item_3"]\n    delete_response = client.delete_item_batch(index_name, ids=item_ids_to_delete)\n    if isinstance(delete_response, DeleteItemBatch.Success):\n        print("Successfully deleted items")\n    elif isinstance(delete_response, DeleteItemBatch.Error):\n        raise(Exception("Error while deleting items " + delete_response.message))\n')),(0,o.kt)("h2",{id:"usage-notes"},"Usage notes"),(0,o.kt)("p",null,"For any of these functions, call the ",(0,o.kt)("inlineCode",{parentName:"p"},"create_vector_index_client()")," function which returns a ",(0,o.kt)("inlineCode",{parentName:"p"},"PreviewVectorIndexClient")," object. Then pass that object into subsequent functions. This way, calls are more efficient as they reuse the ",(0,o.kt)("inlineCode",{parentName:"p"},"PreviewVectorIndexClient")," for multiple calls to Momento."))}p.isMDXComponent=!0},670:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/files/MomentoBasics-e45a5a4f32b6f056b3f6568cabbe07b8.py"},4348:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/python-mvi-cheat-sheet-f122bedbbcf4c93a08449f31c82d7ba7.jpg"}}]);